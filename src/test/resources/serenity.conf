serenity {
  test {
    root = serenityswag
  }
  serenity.loggin = verbose
}

environment = run_on_lambdatest

environments{

  run_on_lambdatest {
    tags = "not local"

    serenity.extension.packages="webtest.lambdatest"

    webdriver {
      driver = remote
      remote.url = "https://#{lambdatest.user}:#{lambdatest.key}@hub.lambdatest.com/wd/hub"

      platformName = "Windows 10"
      browserName = "Chrome"
      version = "111"
      video = true
      visual = true
    }
  }

  run_on_browserstack {
    webdriver {
      driver = remote
      remote = "https://#{browserstack.user}:#{browserstack.key}@hub-cloud.browserstack.com/wd/hub"
    }

    browserstack {
      os = "Windows"
      osVersion = "10"
      browser = "Chrome"
      browserVersion = "lastest"
      resolution = "1024x768"
    }
  }

  run_on_saucelabs {
    webdriver {
      driver = remote
      remote.url = "https://#{saucelabs.username}:#{saucelabs.accessKey}@#{saucelabs.datacenter}.saucelabs.com:443/wd/hub"
    }

    saucelabs {
      platformName = "Windows 10"
      browserName = "Chrome"
      browserVersion = "latest"

      tags = ["end-to-end"]
      maxDuration = 900
      capturePerformance = true
      extendedDebugging = true

    }
  }

  grid {
    webdriver {
      driver = remote
      remote.url = "http://127.0.0.1:4444/wd/hub"
      brouserName = "firefox"
      screenResolution = "1280x1024"
      unhandledPromptBehavior = "ignore"
    }
  }

  local {
    webdriver.driver = chrome

    capabilities {
      browserName = "chrome"
      "goog:chromeOptions" {
        args = [
          "windows-size=1000,800",
          "test-type",
          "ignore-certificate-errors",
          "incognito",
          "disable-extensions",
          "disable-infobars",
          "disable-gpu",
          "disable-default-apps",
          "disable-popup-blocking",
          "remote-allow-origins=*"
        ]

        prefs {
          download.prompt_for_download = false
          download.default_directory = ${TEMP}
        }
      }
    }
  }
}